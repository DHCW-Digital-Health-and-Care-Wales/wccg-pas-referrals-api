@page
@model WCCG.PAS.Referrals.UI.Pages.ItemEditorModel

<div class="fs-5 mb-4">
  <a class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href="/">
    <svg class="bi bi-arrow-left" fill="currentColor" height="19" viewBox="0 0 19 19" width="19" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" fill-rule="evenodd"/>
    </svg>
    Back to list
  </a>
</div>

<form asp-page="/ItemEditor" asp-route-id="@Model.Referral.Id" method="post">

  <textarea asp-for="ReferralJson" id="code"></textarea>
  <div class="float-end mt-3">
    @if (Model.IsSaved is not null)
    {
      if (Model.IsSaved.Value)
      {
        <p class="text-success d-inline-block mt-2 mx-4 fs-5">
          Saved successfully
        </p>
      }
      else
      {
        <p class="text-danger d-inline-block mt-2 mx-4 fs-5">
          @Model.ErrorMessage
        </p>
      }
    }
    <input class="btn btn-primary btn-lg save-button" type="submit" value="Save"/>
  </div>
</form>

@section scripts{
  <script src="~/js/codemirror/codemirror.min.js"></script>
  <script src="~/js/codemirror/closebrackets.min.js"></script>
  <script src="~/js/codemirror/codemirrorHelper.js"></script>
  <script src="~/js/codemirror/matchbrackets.min.js"></script>
  <script src="~/js/itemEditor.js"></script>
}
